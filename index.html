<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #1a1a2e; /* Dark navy background for elegance */
            font-family: 'Poppins', sans-serif;
        }

        /* Canvas for the special animation */
        canvas {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2;
            pointer-events: none; /* Allows clicks to go "through" the canvas */
        }

        /* Container for standard text messages */
        #message-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 90%;
            max-width: 800px;
            z-index: 1;
            color: #e0e0e0; /* Soft white text for readability */
        }

        .message-text {
            font-size: 8vw; /* Responsive font that scales with viewport width */
            font-weight: 600;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        /* Adjust font size for larger screens for better aesthetics */
        @media screen and (min-width: 768px) {
            .message-text {
                font-size: 4rem;
            }
        }

        /* The background image that appears at the end */
        #background-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('HBD.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0;
            z-index: 0;
            transition: opacity 2.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="message-container">
        <p class="message-text"></p>
    </div>
    <div id="background-image"></div>
    <canvas id="c"></canvas>
    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        const messageTextElement = document.querySelector('.message-text');

        let w, h, hw, hh;
        let letters = [];
        let animationFrameId;

        const messages = [
            "Hello Rucha,",
            "It's been a while",
            "Hope you are doing well",
            "I remembered it's your Birthday Today.",
            "As such...",
            "Happy Birthday!", // This is the special message
            // These will appear after the background image
            "I hope you have the most splendid day ever,",
            "and an amazing rest of the year.",
            "From your friend, Onkar :D"
        ];
        let messageIndex = 0;

        // Configuration for animations
        const opts = {
            charSize: 30,
            charSpacing: 35,
            lineHeight: 50, // Increased for two lines
            fireworkBaseReachTime: 40,
            fireworkAddedReachTime: 40,
            letterContemplatingWaitTime: 400,
            balloonBaseInflateTime: 20,
            balloonAddedInflateTime: 20,
            balloonBaseSize: 20,
            balloonAddedSize: 20,
            balloonBaseVel: 0.5,
            balloonAddedVel: 0.5,
            balloonBaseRadian: -(Math.PI / 2 - 0.5),
            balloonAddedRadian: -1,
            upFlow: -0.05,
            gravity: 0.08,
            fireworkBaseShards: 4,
            fireworkAddedShards: 4
        };

        const Tau = Math.PI * 2;
        const TauQuarter = Tau / 4;

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            hw = w / 2;
            hh = h / 2;
            // Adjust canvas font size based on screen width for responsiveness
            opts.charSize = w < 768 ? 25 : 35;
            ctx.font = `600 ${opts.charSize}px Poppins, sans-serif`;
        }

        // --- Letter Class for the "Happy Birthday!" animation ---
        class Letter {
            constructor(char, x, y) {
                this.char = char;
                this.x = x;
                this.y = y;
                this.dx = -ctx.measureText(char).width / 2;
                this.dy = +opts.charSize / 2;
                this.fireworkDy = this.y - hh;

                const hue = (x + hw) / w * 360 + Math.random() * 60 - 30;
                this.color = `hsl(${hue}, 80%, 60%)`;
                this.lightColor = `hsl(${hue}, 80%, 70%)`;
                this.alphaColor = `hsla(${hue}, 80%, 60%, alp)`;
                
                this.reset();
            }

            reset() {
                this.phase = 'firework';
                this.tick = 0;
                this.reachTime = (opts.fireworkBaseReachTime + opts.fireworkAddedReachTime * Math.random()) | 0;
                this.prevPoints = [[this.x, h]];
            }

            step() {
                if (this.phase === 'firework') {
                    this.tick++;
                    const proportion = Math.min(this.tick / this.reachTime, 1);
                    const y = h - (h - this.y) * proportion;
                    this.prevPoints.push([this.x, y]);
                    
                    ctx.strokeStyle = this.alphaColor.replace('alp', proportion);
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(this.prevPoints[0][0], this.prevPoints[0][1]);
                    ctx.lineTo(this.x, y);
                    ctx.stroke();

                    if (this.tick >= this.reachTime) {
                        this.phase = 'contemplate';
                        this.tick = 0;
                        this.shards = [];
                        const shardCount = (opts.fireworkBaseShards + opts.fireworkAddedShards * Math.random()) | 0;
                        const angle = Tau / shardCount;
                        for (let i = 0; i < shardCount; i++) {
                            const ang = angle * i;
                            this.shards.push(new Shard(this.x, this.y, Math.cos(ang), Math.sin(ang), this.color));
                        }
                    }
                } else if (this.phase === 'contemplate') {
                    this.tick++;
                    ctx.fillStyle = this.lightColor;
                    ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);
                    this.shards.forEach(s => s.step());
                    this.shards = this.shards.filter(s => s.alive);

                    if (this.tick > opts.letterContemplatingWaitTime) {
                        this.tick = 0;
                        this.phase = 'balloon';
                        this.inflateTime = (opts.balloonBaseInflateTime + opts.balloonAddedInflateTime * Math.random()) | 0;
                        this.size = (opts.balloonBaseSize + opts.balloonAddedSize * Math.random()) | 0;
                        const rad = opts.balloonBaseRadian + opts.balloonAddedRadian * Math.random();
                        const vel = opts.balloonBaseVel + opts.balloonAddedVel * Math.random();
                        this.vx = Math.cos(rad) * vel;
                        this.vy = Math.sin(rad) * vel;
                        this.cx = this.x;
                        this.cy = this.y;
                    }
                } else if (this.phase === 'balloon') {
                    this.cx += this.vx;
                    this.cy += this.vy += opts.upFlow;
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    generateBalloonPath(this.cx, this.cy, this.size);
                    ctx.fill();
                    
                    if (this.cy + this.size < 0) this.phase = 'done';
                }
            }
        }
        
        // --- Helper classes and functions for animation ---
        class Shard {
            constructor(x, y, vx, vy, color) {
                const vel = Math.random() * 3 + 1;
                this.vx = vx * vel; this.vy = vy * vel;
                this.x = x; this.y = y; this.color = color;
                this.alive = true;
            }
            step() {
                this.x += this.vx; this.y += this.vy += opts.gravity;
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x - 1, this.y - 1, 3, 3);
                if (this.y > hh + this.size) this.alive = false;
            }
        }

        function generateBalloonPath(x, y, size) {
            ctx.moveTo(x, y);
            ctx.bezierCurveTo(x - size / 2, y - size / 2, x - size / 4, y - size, x, y - size);
            ctx.bezierCurveTo(x + size / 4, y - size, x + size / 2, y - size / 2, x, y);
        }

        function anim() {
            animationFrameId = window.requestAnimationFrame(anim);
            ctx.clearRect(0, 0, w, h);
            ctx.save();
            ctx.translate(hw, hh);
            letters.forEach(l => l.step());
            ctx.restore();
            
            if (letters.length > 0 && letters.every(l => l.phase === 'done')) {
                stopAnimation();
                letters = [];
                setTimeout(showBackgroundImageAndContinue, 500);
            }
        }

        function startAnimation() {
            if (!animationFrameId) anim();
        }

        function stopAnimation() {
            if (animationFrameId) {
                window.cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
                ctx.clearRect(0, 0, w, h);
            }
        }

        // --- Main controller for the message sequence ---
        function showNextMessage() {
            if (messageIndex >= messages.length) return;

            const msg = messages[messageIndex];

            if (msg === "Happy Birthday!") {
                messageTextElement.style.opacity = 0;
                letters = []; // Clear previous letters
                
                const lines = ["Happy", "Birthday!"];
                const yPositions = [-opts.lineHeight / 2, opts.lineHeight / 2];

                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    const y = yPositions[i];
                    const lineWidth = line.length * opts.charSpacing;
                    const startX = -lineWidth / 2;

                    for (let j = 0; j < line.length; j++) {
                        const x = startX + j * opts.charSpacing;
                        letters.push(new Letter(line[j], x, y));
                    }
                }
                
                messageIndex++;
                startAnimation();
            } else {
                messageTextElement.textContent = msg;
                messageTextElement.style.opacity = 1;

                setTimeout(() => {
                    messageTextElement.style.opacity = 0;
                    setTimeout(() => {
                        messageIndex++;
                        showNextMessage();
                    }, 1500); // Wait for fade-out before showing next message
                }, 3000); // How long each message stays on screen
            }
        }
        
        function showBackgroundImageAndContinue() {
            document.getElementById('background-image').style.opacity = '0.7';
            setTimeout(showNextMessage, 2500); // Start final messages after background appears
        }

        // --- Initial Setup ---
        window.addEventListener('resize', resize);
        resize();
        setTimeout(showNextMessage, 1000); // Start the sequence after a brief pause

    </script>
</body>
</html>

 -->

 <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday!</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #1a1a2e; /* Dark navy background for elegance */
            font-family: 'Poppins', sans-serif;
        }

        /* Canvas for the special animation */
        canvas {
            display: block;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 2;
            pointer-events: none; /* Allows clicks to go "through" the canvas */
        }

        /* Container for standard text messages */
        #message-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 90%;
            max-width: 800px;
            z-index: 1;
            color: #e0e0e0; /* Soft white text for readability */
        }

        .message-text {
            font-size: 8vw; /* Responsive font that scales with viewport width */
            font-weight: 600;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        /* Adjust font size for larger screens for better aesthetics */
        @media screen and (min-width: 768px) {
            .message-text {
                font-size: 4rem;
            }
        }

        /* The background image that appears at the end */
        #background-image {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('HBD.jpg');
            /* UPDATED: 'contain' ensures the whole image fits, with padding if needed */
            background-size: contain;
            background-position: center;
            background-repeat: no-repeat; /* Prevents tiling */
            opacity: 0;
            z-index: 0;
            transition: opacity 2.5s ease-in-out;
        }
    </style>
</head>
<body>
    <div id="message-container">
        <p class="message-text"></p>
    </div>
    <div id="background-image"></div>
    <canvas id="c"></canvas>
    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        const messageTextElement = document.querySelector('.message-text');

        let w, h, hw, hh;
        let letters = [];
        let animationFrameId;

        const messages = [
            "Hello Shreyasi,",
            "It's been a while",
            "Hope you are doing well",
            "How's College ? I hope its going well.",
            "I remembered it's your Birthday Today.",
            "As such...",
            "Happy Birthday!", // This is the special message
            // These will appear after the background image
            "I hope you have the most splendid day ever,",
            "and an amazing rest of the year.",
            "From your friend, Onkar :D"
        ];
        let messageIndex = 0;

        // Configuration for animations
        const opts = {
            charSize: 30,
            charSpacing: 35,
            lineHeight: 50,
            fireworkBaseReachTime: 40,
            fireworkAddedReachTime: 40,
            letterContemplatingWaitTime: 400,
            balloonBaseInflateTime: 20,
            balloonAddedInflateTime: 20,
            balloonBaseSize: 20,
            balloonAddedSize: 20,
            balloonBaseVel: 0.5,
            balloonAddedVel: 0.5,
            balloonBaseRadian: -(Math.PI / 2 - 0.5),
            balloonAddedRadian: -1,
            upFlow: -0.05,
            gravity: 0.08,
            fireworkBaseShards: 4,
            fireworkAddedShards: 4
        };

        const Tau = Math.PI * 2;

        function resize() {
            w = canvas.width = window.innerWidth;
            h = canvas.height = window.innerHeight;
            hw = w / 2;
            hh = h / 2;
            opts.charSize = w < 768 ? 25 : 35;
            ctx.font = `600 ${opts.charSize}px Poppins, sans-serif`;
        }

        class Letter {
            constructor(char, x, y) {
                this.char = char;
                this.x = x;
                this.y = y;
                this.dx = -ctx.measureText(char).width / 2;
                this.dy = +opts.charSize / 2;
                
                const hue = (x + hw) / w * 360 + Math.random() * 60 - 30;
                this.color = `hsl(${hue}, 80%, 60%)`;
                this.lightColor = `hsl(${hue}, 80%, 70%)`;
                this.alphaColor = `hsla(${hue}, 80%, 60%, alp)`;
                
                this.reset();
            }

            reset() {
                this.phase = 'firework';
                this.tick = 0;
                this.reachTime = (opts.fireworkBaseReachTime + opts.fireworkAddedReachTime * Math.random()) | 0;
                this.prevPoints = [[this.x, h]];
            }

            step() {
                if (this.phase === 'firework') {
                    this.tick++;
                    const proportion = Math.min(this.tick / this.reachTime, 1);
                    const y = h - (h - this.y) * proportion;
                    this.prevPoints.push([this.x, y]);
                    
                    ctx.strokeStyle = this.alphaColor.replace('alp', proportion);
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(this.prevPoints[0][0], this.prevPoints[0][1]);
                    ctx.lineTo(this.x, y);
                    ctx.stroke();

                    if (this.tick >= this.reachTime) {
                        this.phase = 'contemplate';
                        this.tick = 0;
                        this.shards = [];
                        const shardCount = (opts.fireworkBaseShards + opts.fireworkAddedShards * Math.random()) | 0;
                        const angle = Tau / shardCount;
                        for (let i = 0; i < shardCount; i++) {
                            const ang = angle * i;
                            this.shards.push(new Shard(this.x, this.y, Math.cos(ang), Math.sin(ang), this.color));
                        }
                    }
                } else if (this.phase === 'contemplate') {
                    this.tick++;
                    ctx.fillStyle = this.lightColor;
                    ctx.fillText(this.char, this.x + this.dx, this.y + this.dy);
                    this.shards.forEach(s => s.step());
                    this.shards = this.shards.filter(s => s.alive);

                    if (this.tick > opts.letterContemplatingWaitTime) {
                        this.tick = 0;
                        this.phase = 'balloon';
                        this.inflateTime = (opts.balloonBaseInflateTime + opts.balloonAddedInflateTime * Math.random()) | 0;
                        this.size = (opts.balloonBaseSize + opts.balloonAddedSize * Math.random()) | 0;
                        const rad = opts.balloonBaseRadian + opts.balloonAddedRadian * Math.random();
                        const vel = opts.balloonBaseVel + opts.balloonAddedVel * Math.random();
                        this.vx = Math.cos(rad) * vel;
                        this.vy = Math.sin(rad) * vel;
                        this.cx = this.x;
                        this.cy = this.y;
                    }
                } else if (this.phase === 'balloon') {
                    this.cx += this.vx;
                    this.cy += this.vy += opts.upFlow;
                    ctx.fillStyle = this.color;
                    ctx.beginPath();
                    generateBalloonPath(this.cx, this.cy, this.size);
                    ctx.fill();
                    
                    if (this.cy + this.size < -hh) this.phase = 'done';
                }
            }
        }
        
        class Shard {
            constructor(x, y, vx, vy, color) {
                const vel = Math.random() * 3 + 1;
                this.vx = vx * vel; this.vy = vy * vel;
                this.x = x; this.y = y; this.color = color;
                this.alive = true;
                this.size = 2;
            }
            step() {
                this.x += this.vx; this.y += this.vy += opts.gravity;
                ctx.fillStyle = this.color;
                ctx.fillRect(this.x - 1, this.y - 1, this.size, this.size);
                if (this.y > hh + this.size) this.alive = false;
            }
        }

        function generateBalloonPath(x, y, size) {
            ctx.moveTo(x, y);
            ctx.bezierCurveTo(x - size / 2, y - size / 2, x - size / 4, y - size, x, y - size);
            ctx.bezierCurveTo(x + size / 4, y - size, x + size / 2, y - size / 2, x, y);
        }

        function anim() {
            animationFrameId = window.requestAnimationFrame(anim);
            ctx.clearRect(0, 0, w, h);
            ctx.save();
            ctx.translate(hw, hh);
            letters.forEach(l => l.step());
            ctx.restore();
            
            if (letters.length > 0 && letters.every(l => l.phase === 'done')) {
                stopAnimation();
                letters = [];
                setTimeout(showBackgroundImageAndContinue, 500);
            }
        }

        function startAnimation() {
            if (!animationFrameId) anim();
        }

        function stopAnimation() {
            if (animationFrameId) {
                window.cancelAnimationFrame(animationFrameId);
                animationFrameId = null;
                ctx.clearRect(0, 0, w, h);
            }
        }

        function showNextMessage() {
            if (messageIndex >= messages.length) return;

            const msg = messages[messageIndex];

            if (msg === "Happy Birthday!") {
                messageTextElement.style.opacity = 0;
                letters = [];
                
                const lines = ["Happy", "Birthday!"];
                const yPositions = [-opts.lineHeight / 2, opts.lineHeight / 2];
                // UPDATED: Added a horizontal offset to shift the text slightly right
                const horizontalOffset = 15; 

                for (let i = 0; i < lines.length; i++) {
                    const line = lines[i];
                    const y = yPositions[i];
                    const lineWidth = line.length * opts.charSpacing;
                    const startX = -lineWidth / 2;

                    for (let j = 0; j < line.length; j++) {
                        const x = startX + j * opts.charSpacing + horizontalOffset;
                        letters.push(new Letter(line[j], x, y));
                    }
                }
                
                messageIndex++;
                startAnimation();
            } else {
                messageTextElement.textContent = msg;
                messageTextElement.style.opacity = 1;

                setTimeout(() => {
                    messageTextElement.style.opacity = 0;
                    setTimeout(() => {
                        messageIndex++;
                        showNextMessage();
                    }, 1500);
                }, 3000);
            }
        }
        
        function showBackgroundImageAndContinue() {
            document.getElementById('background-image').style.opacity = '0.7';
            setTimeout(showNextMessage, 2500);
        }

        window.addEventListener('resize', resize);
        resize();
        setTimeout(showNextMessage, 1000);

    </script>
</body>
</html>
